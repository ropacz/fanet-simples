# FANET Simulation - Optimized Working Configuration
[General]
network = FANET
sim-time-limit = 45s  # Ajustado para coincidir com timer de finalização
seed-set = ${runnumber}

# === PERFORMANCE ===
cmdenv-express-mode = true
cmdenv-autoflush = false
cmdenv-status-frequency = 5s

# === LOGGING (OPTIMIZED) ===
**.scalar-recording = true
**.vector-recording = false
**.**.logLevel = "WARN"
**.app[0].logLevel = "INFO"  # Ver logs importantes do protocolo FANET
**.radioMedium.logLevel = "WARN"
**.wlan[*].radio.logLevel = "WARN"

# === NETWORK ===
**.numUAVs = 2  # Configuração padrão testada e funcional

# === MOBILITY (OPTIMIZED) ===
**.uav[*].mobility.typename = "ArbitraryMobility"
**.uav[*].mobility.minSpeed = 10mps
**.uav[*].mobility.maxSpeed = 15mps
**.uav[*].mobility.updateInterval = 2s  # Mais frequente para melhor conectividade
**.uav[*].mobility.constraintAreaMinX = 200m   # Área ampla conforme FANET.ned
**.uav[*].mobility.constraintAreaMaxX = 1800m
**.uav[*].mobility.constraintAreaMinY = 200m
**.uav[*].mobility.constraintAreaMaxY = 1800m  # CORRIGIDO
**.uav[*].mobility.minAltitude = 95m
**.uav[*].mobility.maxAltitude = 105m

# Posições iniciais ESTRATÉGICAS para conectividade multi-hop
**.uav[0].mobility.initialX = 1300m   # ~300m do GCS - dentro do alcance
**.uav[0].mobility.initialY = 1300m
**.uav[0].mobility.initialZ = 100m

**.uav[1].mobility.initialX = 700m    # ~424m do GCS, ~565m do UAV[0] - ponte necessária
**.uav[1].mobility.initialY = 700m
**.uav[1].mobility.initialZ = 100m

# Posições para UAVs adicionais (Production) - rede em cadeia
**.uav[2].mobility.initialX = 500m    # ~707m do GCS, ~283m do UAV[1] - conecta via UAV[1]
**.uav[2].mobility.initialY = 500m
**.uav[2].mobility.initialZ = 100m

**.uav[3].mobility.initialX = 1500m   # Mais próximo para conectividade
**.uav[3].mobility.initialY = 1000m   # Mesma linha Y do GCS
**.uav[3].mobility.initialZ = 100m

**.uav[4].mobility.initialX = 1000m   # ~600m do GCS, pode conectar via UAV[0]
**.uav[4].mobility.initialY = 1600m
**.uav[4].mobility.initialZ = 100m

**.gcs.mobility.typename = "StationaryMobility"
**.gcs.mobility.initialX = 1000m
**.gcs.mobility.initialY = 1000m
**.gcs.mobility.initialZ = 10m

# === APPLICATION (OPTIMIZED) ===
**.app[0].typename = "FANETApp"
**.app[0].localPort = 1000
**.app[0].destPort = 1000
**.app[0].neighborTimeout = 35s  # Timeout maior para manter vizinhos
**.app[0].startTime = 2s  # Tempo para inicialização completa

**.uav[*].app[0].isGCS = false
**.uav[*].app[0].maxTransmissionRange = 500m  # Alcance máximo para mesh completo

**.gcs.app[0].isGCS = true
**.gcs.app[0].maxTransmissionRange = 600m  # GCS com alcance máximo para cobrir área

# === WIRELESS (OPTIMIZED) ===
**.wlan[*].mgmt.ssid = "FANET"
**.wlan[*].mgmt.typename = "Ieee80211MgmtAdhoc"
**.wlan[*].mac.address = "auto"
**.wlan[*].mac.dcf.channelAccess.pendingQueue.packetCapacity = 50
**.arp.typename = "GlobalArp"

**.uav[*].wlan[*].radio.transmitter.power = 120mW  # Potência alta para área ampla
**.gcs.wlan[*].radio.transmitter.power = 150mW   # GCS com potência máxima

# === PHYSICAL LAYER (OPTIMIZED) ===
**.radioMedium.typename = "Ieee80211ScalarRadioMedium"
**.radioMedium.pathLoss.typename = "FreeSpacePathLoss"
**.radioMedium.pathLoss.alpha = 2.2  # Ligeiramente mais realista
**.radioMedium.backgroundNoise.power = -105dBm  # Ruído um pouco menor
**.wlan[*].radio.centerFrequency = 2.4GHz
**.wlan[*].radio.antenna.typename = "IsotropicAntenna"
**.wlan[*].radio.receiver.sensitivity = -90dBm  # Sensibilidade melhorada

# === IP ===
**.configurator.config = xml("<config><interface hosts='**' address='192.168.1.x' netmask='255.255.255.0'/></config>")
**.configurator.addDefaultRoutes = false
**.configurator.addStaticRoutes = true
**.configurator.addSubnetRoutes = true

# === BROADCAST ===
**.ipv4.ip.limitedBroadcast = true
**.ipv4.ip.directBroadcastInterfaces = "wlan0"
**.ipv4.forwarding = false

# === VISUALIZATION DESABILITADA ===
**.visualizer.*.display* = false

# === SCENARIOS OTIMIZADOS ===
[Config Default]
description = "FANET test - 45 segundos com finalizacao automatica"

[Config Quick]
description = "Teste rapido - 2 drones (um perto, outro como ponte)"
sim-time-limit = 30s
**.numUAVs = 2
**.app[0].logLevel = "INFO"
# Cenário de relay: UAV[0] conecta ao GCS, UAV[1] conecta via UAV[0]
**.uav[0].mobility.initialX = 1300m  # ~300m do GCS - conexão direta
**.uav[0].mobility.initialY = 1300m
**.uav[1].mobility.initialX = 1550m  # ~550m do GCS, ~350m do UAV[0] - relay via UAV[0]
**.uav[1].mobility.initialY = 1550m

[Config FastTest]
description = "Teste ultra-rapido - 1 drone"
sim-time-limit = 20s
**.numUAVs = 1
**.app[0].logLevel = "INFO"
**.uav[0].mobility.initialX = 1200m  # Próximo mas não colado no GCS
**.uav[0].mobility.initialY = 1200m

[Config Production]
description = "Simulacao de producao - 5 drones, 120 segundos"
sim-time-limit = 120s
**.numUAVs = 5
**.app[0].logLevel = "WARN"
# Manter área de mobilidade padrão mas com posições bem definidas

[Config Debug]
description = "Configuracao para debug com logs detalhados"
sim-time-limit = 30s
**.numUAVs = 2
**.app[0].logLevel = "DEBUG"
**.**.logLevel = "INFO"